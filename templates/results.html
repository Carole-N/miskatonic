<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet" />
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
    <title>Quiz Results</title>
</head>

<body>
    <nav>
        <p>Welcome, {{ user }} | <a href="{{ url_for('home') }}">Home</a> | <a href="{{ url_for('logout') }}">Logout</a>
        </p>
    </nav>

    <div class="results_box">
        <h2>Quiz Finished!</h2>
        <p>Your score: {{ score }} / {{ quizz.questions|length }}</p>

        <h3>Details per question:</h3>
        {% for q in quizz.questions %}
        <div>
            <p><strong>Question {{ loop.index }}:</strong> {{ q.question_text }}</p>
            <p><strong>Your answer(s):</strong>
                {{ answers[q.get('question_id')]|join(', ') if answers[q.get('question_id')] else 'None' }}
            </p>
            <p><strong>Correct answer(s):</strong> {{ q.good_answers_texte|join(', ') }}</p>
            {% if q.remark %}
            <p><em>Remark: {{ q.remark }}</em></p>
            {% endif %}
        </div>
        <hr>
        {% endfor %}

        <a href="{{ url_for('student_quizz', quizz_id=quizz['_id']) }}"><button>Try Again</button></a>
        <a href="{{ url_for('student_home') }}"><button>Back to Home</button></a>

    </div>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
<footer>
    <div>
        <a href="{{ url_for('privacy') }}">Privacy Policy</a>
    </div>
</footer>

</html>